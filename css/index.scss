/* all values adjust specifically for FF where needed....chrome secondary */

@import "config";

//@import "index.webfonts";
@import "index.localfonts";

// functions ---------------------------------------
@mixin transition($t) {
	-webkit-transition: $t;
	-moz-transition: $t;
	-o-transition: $t;
	-ms-transition: $t;
	transition: $t;
}
@mixin sphere($color) {
	$c1: lighten($color, 5);
	$c2: $color;
	$c3: darken($color, 40);
	$shadow: $c2;//darken($c3, 5);

	$p1: -20px;
	$p2: -20px;

	border-style: solid;
	border-color: $c1;
	border-width: 1px;

	background-color: $color;

	background-position: center center;
	background-image: -moz-radial-gradient($p1 $p2, circle , $c1 0%, $c2 50%, $c3 100%);
	background-image: -webkit-radial-gradient($p1 $p2, circle , $c1 0%, $c2 50%, $c3 100%);
}

@mixin sphere_shadow($color) {
	$c1: lighten($color, 5);
	$c2: $color;
	$c3: darken($color, 40);
	$shadow: $c2;//darken($c3, 5);

	box-shadow: 1px 1px 3px $shadow;
	-moz-box-shadow: 1px 1px 3px $shadow;
	-webkit-box-shadow: 1px 1px 3px $shadow;
}

@mixin blendshadow($c1, $c2, $c3, $c4, $c5, $step: -5px) {
	color: #fff;

	$blur: 3px;
	text-shadow: 
		2px 0 0 #000,
		0 2px 0 #000,
		-2px 0 0 #000,
		0 -2px 0 #000,

		($step * 1) ($step * -1) $blur $c1,
		($step * -2) ($step * 1) $blur $c2,
		($step * 3) ($step * 1) $blur $c3,
		($step * -4) ($step * 1) $blur $c4,
		($step * 5) ($step * -1) $blur $c5,

		($step * -1.5) ($step * 1.5) $blur*3 $c5,
		($step * 2.5) ($step * -1.5) $blur*3 $c4,
		($step * -3.5) ($step * -1.5) $blur*3 $c3,
		($step * 4.5) ($step * -1.5) $blur*3 $c2,
		($step * -5.5) ($step * 1.5) $blur*3 $c1;
}

@mixin neontext($color, $step: 2px) {
	color: lighten($color_game_border, 40);

	text-shadow: 
		0 0 $step lighten($color,10),
		0 0 $step*2 lighten($color,20),
		0 0 $step*3 $color,
		0 0 $step*4 darken($color, 5),
		0 0 $step*7 darken($color, 5),
		0 0 $step*8 darken($color, 5),
		0 0 $step*10 darken($color, 10),
		0 0 $step*15 darken($color, 10),

		1px 0 $step lighten($color,40),
		0 1px $step lighten($color,40),
		-1px 0 $step lighten($color,40),
		0 -1px $step lighten($color,40);
}

@mixin btnGradient($color) {
	$tbot_color1: $color;

	// main colors
	$tbot_color2: saturate(darken($tbot_color1, 10), 10);
	$tbot_color3: saturate(darken($tbot_color2, 10), 10);
	$tbot_color4: saturate(darken($tbot_color3, 10), 10);

	background-color: $tbot_color1;
	background-image: -moz-linear-gradient(top, $tbot_color1 0%, $tbot_color2 50%, $tbot_color3 50%, $tbot_color4 100%);
	background-image: -webkit-linear-gradient(top, $tbot_color1 0%, $tbot_color2 50%, $tbot_color3 50%, $tbot_color4 100%);
	background-image: linear-gradient(top, $tbot_color1 0%, $tbot_color2 50%, $tbot_color3 50%, $tbot_color4 100%);
}

@mixin btnGradientImportant($color) {
	$tbot_color1: $color;

	// main colors
	$tbot_color2: saturate(darken($tbot_color1, 10), 10);
	$tbot_color3: saturate(darken($tbot_color2, 10), 10);
	$tbot_color4: saturate(darken($tbot_color3, 10), 10);

	background-color: $tbot_color1 !important;
	background-image: -moz-linear-gradient(top, $tbot_color1 0%, $tbot_color2 50%, $tbot_color3 50%, $tbot_color4 100%) !important;
	background-image: -webkit-linear-gradient(top, $tbot_color1 0%, $tbot_color2 50%, $tbot_color3 50%, $tbot_color4 100%) !important;
	background-image: linear-gradient(top, $tbot_color1 0%, $tbot_color2 50%, $tbot_color3 50%, $tbot_color4 100%) !important;
}

@mixin makebutton($color, $shadow: rgba(0, 0, 0, 0.8)) {
	text-decoration: none;
	text-shadow: 0px -1px 1px $shadow;
	
	-webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;

    -webkit-box-shadow: inset 0px 0px 0px 1px rgba(255, 115, 100, 0.4), 0 1px 3px #333333;
    -moz-box-shadow: inset 0px 0px 0px 1px rgba(255, 115, 100, 0.4), 0 1px 3px #333333;
    box-shadow: inset 0px 0px 0px 1px rgba(255, 115, 100, 0.4), 0 1px 3px #333333;

    @include btnGradient($color);
}

@mixin link-button($height) {
	display: inline-block;

	color: #fff;

	height: ($height - $width_game_border) / 2;

	text-align: center;
	vertical-align: middle;
	font-weight: bold;
	line-height: 2em;

	padding: 0;
	margin: 0;

	padding-left: 1em;
	padding-right: 1em;

	@include makebutton(lighten($color_game_border, 15)); 

	@include transition(all 0.2s linear);

	&#btnScores {
		position: absolute;
		bottom: 0;
	}

	&:hover {
		@include btnGradient($color_game_highlight);

		text-shadow: 
			-1px 0px 1px #000,
			1px 0px 1px #000,
			0px -1px 1px #000,
			0px 1px 1px #000;

		//@include transition(all 5s linear);
	}
}

@mixin sphere0_border($side, $width: 1px, $style: solid) {
	border-#{$side}-style: $style;
	border-#{$side}-width: $width;
}

/* page look */
html {
	-webkit-font-smoothing: antialiased;
}

body {
	background-color: $color_body;
	overflow: hidden;

	font-family: $font_opensans;
	color: #fff;
}

a {
	color: #fff;

	&:hover {
		color: $color_game_border;
	}
}

.container {
	.content {
		width: 100%;
		top: 10px;
		position: absolute;
	}
}

#title {
	//display: none;
	z-index: 900;
	
	color: #fff;
	margin: 0px auto;

	width: 100%;
	text-align: center;

	font-size: 3em;
	font-family: $font_sniglet;

	@include blendshadow($s1, $s2, $s3, $s4, $s5);

	span {
		z-index: 900;
		font-family: $font_luckiest;
		@include neontext($color_game_border); 
	}
}

#credits {
	position: relative;
	width: 100%;
	text-align: center;
	top: 3em;
	font-size: .7em;
	z-index: 1000;
}

$platformwidth: $radius * $cols + ($cols * $padding);
$platformheight: $radius * $rows + ($rows * $padding);

#gameplatform {
	z-index: 200;

	width: $platformwidth;
	height: $platformheight;

	background-color: rgba(0,0,0,0.55);

	border-style: solid;
	border-width: $width_game_border;
	border-color: $color_game_border;

	//padding: $padding * 2;
	padding-bottom: $height_scoreboard;
	margin: 0px auto;

	position: relative;

	top: 10px;

	#blockcontainer {
		.pathway {
			@include btnGradientImportant(darken($s2, 15));
			@include transition(all 0.2s linear);
		}

		.selected {
			@include btnGradientImportant(darken($s3, 15));
			@include transition(all 1s linear);
		}

		.block {
			cursor: pointer;

			width: $radius;
			height: $radius;

			display: inline-block;
			position: absolute;

			//padding-right: 4px;
			//padding-bottom: 4px;
			padding: 2px;

			outline-style: solid;
			outline-width: 1px;
			outline-color: $color_game_border;

			z-index: 200;

			vertical-align: middle;
			text-align: center;

			@include transition(all 0.2s linear);

			&:hover {
				outline-color: #fff;
				outline-width: 3px;

				@include btnGradient(darken($s1, 15));

				z-index: 205;

				@include transition(all 0.2s linear);
			}
		}

		// define individual block types...
		.block1 { content: url('../img/icons/digital_camera.png'); }
		.block2 { content: url('../img/icons/iphone.png'); }
		.block3 { content: url('../img/icons/rainy.png'); }
		.block4 { content: url('../img/icons/sunny.png'); }
		.block5 { content: url('../img/icons/mouse.png'); }
		.block6 { content: url('../img/icons/alarm.png'); }
		.block7 { content: url('../img/icons/flag.png'); }
		.block8 { content: url('../img/icons/phone_ringing.png'); }
		.block9 { content: url('../img/icons/recycle_bin.png'); }
		.block10 { content: url('../img/icons/envelope_open.png'); }
		.block11 { content: url('../img/icons/movie.png'); }
		.block12 { content: url('../img/icons/phone_book.png'); }
		.block13 { content: url('../img/icons/news.png'); }
		.block14 { content: url('../img/icons/database.png'); }
		.block15 { content: url('../img/icons/eject.png'); }
		.block16 { content: url('../img/icons/calculator.png'); }

		// define the row and column positions
		// columns
		@for $x from 0 through ($cols - 1) {
			.col#{$x}{
				left: $radius * $x + ($x * $padding);
			}
		}

		// rows
		@for $x from 0 through ($rows - 1) {
			.row#{$x}{
				top: $radius * $x + ($x * $padding);
			}
		}
	}

	$selectscorewidth: 0px;
	$scorewidth: 50px;
	$controlswidth: 125px;
	$timerwidth: 150px;

	#scorebox {
		/* the bottom score box */
		position: absolute;

		bottom: 0;
		left: $padding * -1 + $width_game_border + 1;

		height: $height_scoreboard;
		width: 100%;

		border-top-style: solid;
		border-top-width: $width_game_border;
		border-top-color: $color_game_border;

		background-color: transparent;

		#timercontainer, #scorecontainer {
			h1 {
				display: block;
				margin: 0;
				padding: 0;

				position: absolute;
				top: 0;
				left: 0;
				width: 100%;
				height: 22px;

				color: #fff;
				background-color: $color_game_border;

				font-weight: bold;
				font-size: 14px;
				text-align: center;
				vertical-align: middle;
			}

			div {
				position: absolute;
				top: 24px;

				width: 100%;
				height: 3em;

				font-weight: bold;
				font-size: 2em;
				text-align: center;
				vertical-align: middle;
			}
		}

		#scorecontainer {
			position: absolute;
			left: $selectscorewidth;
			width: $platformwidth - $controlswidth - $timerwidth - $selectscorewidth;
			height: 100%;

			display: inline-block;

			h1 {
				top: auto !important;
				bottom: 0 !important;
			}

			div {
				top: 0 !important;
			}
		}

		#timercontainer {
			position: absolute;
			right: $controlswidth;
			width: $timerwidth;
			height: 100%;

			display: inline-block;

			border-left-style: solid;
			border-left-width: $width_game_border;
			border-left-color: $color_game_border;
		}

		#controls {
			position: absolute;
			right: 0;

			width: $controlswidth;
			height: 100%;

			border-left-style: solid;
			border-left-width: $width_game_border;
			border-left-color: $color_game_border;

			background-color: $color_game_border;

			display: inline-block;

			a {			
				display: block !important;
				padding: 0 !important;
				width: 100% !important;
				@include link-button($height_scoreboard);
			}
		}
	}
}

@import "bokeh";

/* modal stuff */
.modal {
	position: fixed;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	background: rgba(0,0,0,0.8);
	z-index: 9001; /* omg over 9000! */

	opacity: 0;
	pointer-events: none;

	&:target {
		/* this is what actually shows the modal */
		opacity: 1;
		pointer-events: auto;
	}

	-webkit-transition: opacity 500ms ease-in;
	-moz-transition: opacity 500ms ease-in;
	transition: opacity 500ms ease-in;

	div.mcontainer {
		width: $platformwidth - ($radius * 2);
		background: #000;

		top: ($platformheight) / 3;

		&.help {
			top: 2em !important;
		}

		margin: 0px auto;
		position: relative;

		padding: 1em;

		border-width: $width_game_border;
		border-style: solid;
		border-color: $color_game_border;

		$boxshadowcolor: $color_game_border;
		box-shadow: 1px 1px 30px $boxshadowcolor;
		-moz-box-shadow: 1px 1px 30px $boxshadowcolor;
		-webkit-box-shadow: 1px 1px 30px $boxshadowcolor;

		h1 {
			color: $color_game_border;
			margin: 0px auto;

			width: 100%;
			text-align: center;

			font-size: 2em;
			font-weight: bold;
			line-height: 1em;

			margin-bottom: 0.5em;
		}

		.mcontent {
			font-size: 0.8em;

			min-height: 2em;

			.moves {
				div {
					display: block;
					margin-top: 1em;

					vertical-align: middle
				}

				img {
					margin-right: 2em;

					vertical-align: middle
				}
			}

			#scores {
				width: 100%;
				height: ($platformheight) / 2;
				overflow: auto;

				table {
					width: 100%;
				}
			}

			input.usernameinput {
				font-family: $font_opensans;
				font-weight: bold;

				border-width: 4px;
				border-style: solid;
				border-color: #fff;

				transition: all 0.25s ease-in-out;
				-webkit-transition: all 0.25s ease-in-out;
				-moz-transition: all 0.25s ease-in-out;

				&:hover, &:focus {
					border-width: 4px;
					border-style: solid;
					border-color: $color_game_border;
				}
			}

			div.error {
				color: lighten(red,25);
				font-weight: bold;
			}

			input.error {
				border-width: 4px !important;
				border-style: dashed !important;
				border-color: red !important;

				transition: all 0.25s ease-in-out;
				-webkit-transition: all 0.25s ease-in-out;
				-moz-transition: all 0.25s ease-in-out;
			}
		}

		.mbuttons {
			position: absolute;
			right: $width_game_border * -1;
			margin: 0;
			margin-top: 1em;
			padding: 0;

			background-color: $color_game_border;
			border-width: $width_game_border;
			border-style: solid;
			border-color: $color_game_border;

			a {			
				@include link-button($height_scoreboard);
			}
		}
	}
}